name: release

on:
  push:
    branches: [main]


    env:
      IMAGE_REPOSITORY: demo-script
      IMAGE_TAG: latest
      DOCKER_SERVER: docker.io
      DOCKER_USER: rithwwik
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      - name: Authenticate with DockerHub
        run: |
          # Authenticate with Dockerhub using a Docker password secret
          docker login \
            -u ${{ env.DOCKER_USER }} \
            -p "${{ secrets.DOCKER_PASSWORD }}"
   
    - name: Build and push Docker Image
        run: |
          # Get the branch name
          DOCKER_BRANCH=${{ github.ref }}
          DOCKER_BRANCH=${DOCKER_BRANCH/refs\/heads\//}
